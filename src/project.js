window.__require=function t(e,n,o){function c(i,a){if(!n[i]){if(!e[i]){var u=i.split("/");if(u=u[u.length-1],!e[u]){var l="function"==typeof __require&&__require;if(!a&&l)return l(u,!0);if(r)return r(u,!0);throw new Error("Cannot find module '"+i+"'")}}var s=n[i]={exports:{}};e[i][0].call(s.exports,function(t){return c(e[i][1][t]||t)},s,s.exports,t,e,n,o)}return n[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<o.length;i++)c(o[i]);return c}({GameLogic:[function(t,e,n){"use strict";cc._RF.push(e,"c96466HYo1KYKqpF/SoSLYz","GameLogic");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=this&&this.__decorate||function(t,e,n,o){var c,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(i=(r<3?c(i):r>3?c(e,n,i):c(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,a=r.property,u=function(t){return Number(t>0)-Number(t<0)||+t},l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.numpadButtons=[],e.fishes=[],e.qbubblePrefab=null,e.ibubblePrefab=null,e.buttonScale=.5,e.qbubbles=null,e.ibubbles=null,e._qbubbles=[],e._ibubbles=[],e._onClickNumpad=function(t){if(10===++t){var n=e._ibubbles.pop();n&&(console.log("remove",n.n),cc.tween(n.o).to(.2,{x:0,y:-520,opacity:50}).call(function(){return n.o.destroy()}).start())}else{if(0===e._ibubbles.length)console.log("add",t),(o=cc.instantiate(e.ibubblePrefab)).getChildByName("num").getComponent(cc.Label).string=""+t,6!==t&&9!==t&&(o.getChildByName("underline").getComponent(cc.Label).string=""),e.canvas.node.addChild(o),o.x=0,o.y=-520,o.opacity=50,cc.tween(o).to(.2,{x:-152,y:-170,opacity:255}).start(),e._ibubbles.push({n:t,o:o});else if(1===e._ibubbles.length){var o;console.log("add",t),(o=cc.instantiate(e.ibubblePrefab)).getChildByName("num").getComponent(cc.Label).string=""+t,6!==t&&9!==t&&(o.getChildByName("underline").getComponent(cc.Label).string=""),e.canvas.node.addChild(o),o.x=0,o.y=-520,o.opacity=50,cc.tween(o).to(.2,{x:165,y:-152,opacity:255}).start(),e._ibubbles.push({n:t,o:o}),e._test()}}},e._onTouchStart=function(t){cc.tween(t.node).to(.2,{scale:e.buttonScale}).start()},e._onTouchEnd=function(t){cc.tween(t.node).to(.2,{scale:1}).start()},e._moveFish=function(t){var n=t.width*t.scaleX,o=t.height*t.scaleY,c={x:Math.random()*(t.parent.width-n)+n/2,y:Math.random()*(t.parent.height-o)+o/2},r={x:c.x-t.x,y:c.y-t.y},i=Math.atan(r.y/r.x)/Math.PI*180;cc.tween(t).to(.4,{angle:i}).to(.35,{scaleX:-1*u(r.x)*Math.abs(t.scaleX)}).to(5+3*Math.random(),c).call(function(){return e._moveFish(t)}).start()},e._test=function(){var t=e._ibubbles.reduce(function(t,e){return t+e.n},0);e._qbubbles.forEach(function(e){e.n===t&&cc.tween(e.o).to(.2,{opacity:0}).call(function(){e.o.destroy(),e.n=-1}).start()})},e}return o(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0},e.prototype.start=function(){var t=this;this.numpadButtons.forEach(function(e,n){e.node.on("click",function(){return t._onClickNumpad(n)}),e.node.on(cc.Node.EventType.TOUCH_START,function(){return t._onTouchStart(e)}),e.node.on(cc.Node.EventType.TOUCH_END,function(){return t._onTouchEnd(e)}),e.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){return t._onTouchEnd(e)})}),this.fishes.forEach(function(e){return t._moveFish(e)});for(var e=0;e<12;e++)setTimeout(function(){var e=cc.instantiate(t.qbubblePrefab),n=Math.ceil(17*Math.random())+1;e.getChildByName("num").getComponent(cc.Label).string=""+n,6!==n&&9!==n&&(e.getChildByName("underline").getComponent(cc.Label).string=""),t.qbubbles.addChild(e),e.setPosition(cc.v2(Math.random()*(t.qbubbles.width-e.width)+e.width/2,620)),t._qbubbles.push({n:n,o:e})},400*e);cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){var n=e.keyCode;if(n>=48&&n<=57){var o=n-48;o>0&&o<10&&t._onClickNumpad(o-1)}else 8!==n&&27!==n||t._onClickNumpad(9)})},c([a(cc.Canvas)],e.prototype,"canvas",void 0),c([a(cc.Button)],e.prototype,"numpadButtons",void 0),c([a(cc.Node)],e.prototype,"fishes",void 0),c([a(cc.Prefab)],e.prototype,"qbubblePrefab",void 0),c([a(cc.Prefab)],e.prototype,"ibubblePrefab",void 0),c([a(cc.Float)],e.prototype,"buttonScale",void 0),c([a(cc.Node)],e.prototype,"qbubbles",void 0),c([a(cc.Node)],e.prototype,"ibubbles",void 0),e=c([i],e)}(cc.Component);n.default=l,cc._RF.pop()},{}]},{},["GameLogic"]);